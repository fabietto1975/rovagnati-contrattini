<?php

namespace backend\app\rest\controllers;

use backend\common\rest\controllers\AbstractController;
use backend\app\service\UserService;

class UserController extends AbstractController {
    
    private $userService;

    public function __construct($request) {
        parent::__construct($request);
        $this->userService = new UserService;
    }

    public function getAction() {

        return "ciao";
    }

    public function postAction() {
        $action = $this->request->url_elements[2];
        if ($action=="login"){
            $parameters = $this->request->parameters;
            $res = $this->userService->login($parameters['username'],$parameters['password']);
            
            $this->getResultData($res, 'utente', null);
        } else {
            $this->data['code'] = AbstractController::HTTP_CODE_NOTFOUND;
        }
        return $this->data;
    }

    public function deleteAction() {
        
    }

    public function putAction() {
        
    }

}
