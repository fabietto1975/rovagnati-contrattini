<?php

namespace backend\app\rest\controllers;

use backend\common\rest\controllers\AbstractController;
use backend\app\service\FamigliaProdottoService;


class FamigliaProdottoController extends AbstractController {

    private $famigliaProdottoService;

    public function __construct($request) {
        parent::__construct($request);
        $this->famigliaProdottoService = new FamigliaProdottoService();
    }

    public function getAction() {

        if (isset($this->request->url_elements [2])) {
            $id_famiglia = $this->request->url_elements [2];
            if (isset($this->request->url_elements [3])) {
                $action = $this->request->url_elements [3];
                if ($action =='tipoprodotto'){
                    $res = $this->famigliaProdottoService->readTipiProdotto($id_famiglia);
                    if (isset($res['error'])) {
                        $this->data['code'] = AbstractController::HTTP_CODE_NOTFOUND;
                        $this->getResultData($res, 'tipoprodotto', $res['message']);
                    } else {
                        $this->getResultData($res, 'tipoprodotto',null);
                    }    
                }
            } else {
                $res = $this->famigliaProdottoService->readById($id_famiglia);
                if (isset($res['error'])) {
                    $this->data['code'] = AbstractController::HTTP_CODE_NOTFOUND;
                    $this->getResultData($res, 'famigliaprodotto', $res['message']);
                } else {
                    $this->getResultData($res, 'famigliaprodotto',null);
                }    
            }
        } else {
            $res = $this->famigliaProdottoService->read();
            if (isset($res['error'])) {
                $this->data['code'] = AbstractController::HTTP_CODE_NOTFOUND;
                $this->getResultData($res, 'famigliaprodotto', $res['message']);
            } else {
                $this->getResultData($res, 'famigliaprodotto',null);
            }    
            $this->getResultData($res, 'famigliaprodotto',null);
        }
        return $this->data;
    }

    public function postAction() {
        
    }

    public function deleteAction() {
        
    }

    public function putAction() {
        
    }

}
