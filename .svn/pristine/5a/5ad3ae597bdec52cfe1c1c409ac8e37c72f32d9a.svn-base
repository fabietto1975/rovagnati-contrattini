<?php

namespace backend\app\service;

class FirmaService {


    public function __construct() {
    }
    
        
    public function upload($id_contrattino,$parameters){
        include(APP_ROOT . '/config/config-local.php');
        $file = $parameters['files']['firma'];
        $targetDir = $contrattini['firmeDir'];
        $imageFileType = pathinfo($file['name'],PATHINFO_EXTENSION);
        if ($file['type']!='image/gif' ){
            return array(
                'status' 	=> 'KO',	
                'message' 	=> $file['type'].' ha estensione non ammessa'
            );
        } else {
            $check = getimagesize($file["tmp_name"]);
            if ($check==false){
                return array(
                    'status' 	=> 'KO',	
                    'message' 	=> $file['name'].' Ã¨ un immagine non valida'
                );
            } else {
                $targetFile = $targetDir.'\\'.$id_contrattino.'.'.$imageFileType;
                if (move_uploaded_file($file["tmp_name"], $targetFile)) {
                    return array(
                        'res' =>        'OK',
                        'status' 	=> 'OK',	
                        'message' 	=> $file['name'].": caricamento completato con successo "
                    );
                } else {
                    return array(
                        
                        'status' 	=> 'KO',	
                        'message' 	=> $file['name'].": errore nell'upload del file "
                    );
                }
            }
                        
                       
        }
    }

    

}
